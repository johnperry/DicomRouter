package org.rsna.router;

import java.awt.*;
import java.awt.event.*;
import java.io.File;
import javax.swing.*;
import org.rsna.ui.ColorPane;
import org.rsna.util.FileUtil;
import org.rsna.util.StringUtil;

public class LogPanel extends BasePanel {

	static LogPanel logPanel = null;

	JScrollPane jsp;
	JButton delete;
	JButton refresh;
	ColorPane cp;
	String margin = "          ";

	public static synchronized LogPanel getInstance() {
		if (logPanel == null) logPanel = new LogPanel();
		return logPanel;
	}

	protected LogPanel() {
		super();
		cp = new ColorPane();
		cp.setScrollableTracksViewportWidth(false);
		BasePanel bp = new BasePanel();
		bp.add(cp, BorderLayout.CENTER);
		jsp = new JScrollPane();
		jsp.getVerticalScrollBar().setUnitIncrement(10);
		jsp.setViewportView(bp);
		jsp.getViewport().setBackground(Color.white);
		add(jsp, BorderLayout.CENTER);
	}
	
	public synchronized void log(Color c, String text) {
		String time = StringUtil.getTime(":") + " ";
		time = time.substring(0, time.lastIndexOf("."));
		String[] lines = text.split("\n");
		cp.println(c, time + "  " + lines[0]);
		for (int i=1; i<lines.length; i++) {
			cp.println(c, margin + lines[i]);
		}
	}
	
	class LogEntry {
		Color c;
		String s;
		public LogEntry(Color c, String s) {
			this.c = c;
			this.s = s)
}
